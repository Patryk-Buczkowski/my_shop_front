import{j as r,R as g,r as i,u as f}from"./index-C-wEk9U9.js";import{B as w}from"./Button-O4Job-3m.js";import{a as x}from"./axiosConfig-uxQMNZWX.js";import"./createSimplePaletteValueFilter-rwAWNNgk.js";import"./hoist-non-react-statics.cjs-C-Qo8PK8.js";const h=({inputs:a,formData:m,errorPassword:l,handleRegister:o,handleFileChange:p,handleBlur:c})=>r.jsx("div",{className:"flex w-51 m-auto mb-8 flex-col",children:a.map(e=>e.type==="select"?r.jsx("select",{name:e.name,value:m.country||"PL",onChange:o,className:"mb-1 mr-1 p-1 rounded-md text-sm border-2 border-[var(--color-primary-light)] max-w-[200px]",children:e.options&&e.options.map(d=>r.jsx("option",{className:"bg-[var(--color-primary-light)] text-[var(--color-secondary)]",value:d,children:d},d))},e.name):r.jsxs(g.Fragment,{children:[r.jsx("input",{placeholder:e.name,onChange:e.type==="file"?p:o,value:e.type==="file"?void 0:m[e.name],type:e.type,onBlur:e.type==="password"?c:void 0,min:e.type==="number"?18:void 0,max:e.type==="number"?120:void 0,name:e.name,autoComplete:e.type==="password"?"new-password":"off",accept:e.type==="file"?"image/*":void 0,className:`mb-1 p-1 rounded-md text-sm border-2 border-[var(--color-primary-light)] max-w-[200px]
                ${(e.name==="password"||e.name==="re-password")&&l&&"border-red-600"}`}),l&&(e.name==="password"||e.name==="re-password")&&r.jsx("p",{className:"text-red",children:"Passwords do not match"})]},e.name))}),b={PL:"PL",US:"US",DE:"DE",UK:"UK",FR:"FR"},j=[{name:"imgLink",type:"file"},{name:"country",type:"select",options:Object.keys(b)},{name:"name",type:"text"},{name:"age",type:"number"},{name:"email",type:"text"},{name:"password",type:"password"},{name:"re-password",type:"password"}],P=()=>{const[a,m]=i.useState({imgLink:null,name:"",age:"",email:"",password:"","re-password":"",country:"PL"}),[l,o]=i.useState(!1),p=f(),c=s=>{m(n=>({...n,[s.target.name]:s.target.value}))},e=s=>{var t;const n=(t=s.target.files)==null?void 0:t[0];n&&m(y=>({...y,imgLink:n}))},d=async()=>{if(a.password!==a["re-password"]){o(!0);return}const s=new FormData,n="https://my-shop-backend-h9rp.onrender.com/my_shop_api";s.append("name",a.name),s.append("age",a.age),s.append("email",a.email),s.append("password",a.password),s.append("country",a.country),a.imgLink&&s.append("imgLink",a.imgLink);try{const t=await x.post(`${n}/addUser`,s,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data),t.status===201&&p("/registrationResult?success=true")}catch(t){console.error("Błąd przy wysyłaniu formularza:",t),p("/registrationResult?success=false")}},u=()=>{a.password!==a["re-password"]?o(!0):o(!1)};return r.jsxs("div",{className:"p-3",children:[r.jsx("h1",{className:"text-4xl mb-2 w-35 whitespace-pre-wrap",children:"Create Account"}),r.jsx("img",{className:"rounded-full mb-5 w-25",src:a.imgLink===null?"./Upload_Photo.svg":URL.createObjectURL(a.imgLink),alt:"add Photo"}),r.jsxs("form",{onSubmit:s=>{s.preventDefault(),d()},children:[r.jsx(h,{handleBlur:u,errorPassword:l,formData:a,inputs:j,handleFileChange:e,handleRegister:c}),r.jsx(w,{sx:{borderRadius:"100%",width:"100%",marginBottom:"20px"},variant:"contained",size:"large",type:"submit",children:"Create Profile"})]})]})};export{P as default};
