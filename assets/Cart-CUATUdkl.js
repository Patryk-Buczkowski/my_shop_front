import{c,j as e,b as _,a as S,r as h}from"./index-BOZxi_2N.js";import{c as A,a as o,b as $,d as q,e as z}from"./index.esm-CNOf_2kT.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M5 12h14",key:"1ays0h"}]],F=c("Minus",M);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],E=c("Pencil",I);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],P=c("Plus",T);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],R=c("Trash2",D),V=({product:r,subtract:l})=>e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>l(r._id),className:"w-5 h-5 flex justify-items-center justify-center align-baseline rounded-full border-2 border-[var(--color-primary)]",children:e.jsx(F,{color:"var(--color-primary)",size:15})})}),B=({product:r,add:l})=>e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>l(r),className:"w-5 h-5 flex justify-items-center justify-center align-baseline rounded-full border-2 border-[var(--color-primary)]",children:e.jsx(P,{color:"var(--color-primary)",size:15})})}),O=()=>{const{cart:r,totalSum:l,addToCart:y,decreaseAmount:p,removeFromCart:u}=_(),b=S(),[t,j]=h.useState(localStorage.getItem("deliveryAddress")?JSON.parse(localStorage.getItem("deliveryAddress")||"{}"):null),[d,i]=h.useState(!1),v=["city","country","street_number","voivodeship","zip_code"];console.log("cart",r);const f=A({country:o().required("Country is required"),city:o().required("City is required"),street_number:o().required("Street number is required"),voivodeship:o().required("Region is required"),zip_code:o().required("Zip code is required")}),g=(s,n)=>{s.key==="Escape"&&(n(),i(!1))},N=s=>{console.log(s),localStorage.setItem("deliveryAddress",JSON.stringify(s))};return e.jsxs("div",{className:"flex flex-col w-full p-1 gap-0.5",children:[e.jsx("h3",{className:"font-bold select-none tracking-wider",children:"Cart"}),!d&&e.jsx("div",{className:"flex flex-col mb-3 items-center border border-gray-300 rounded-xl p-4 shadow-md bg-[var(--color-secondary)] max-w-[350px] mx-auto",children:e.jsxs("div",{className:"flex justify-between w-full items-end gap-2",children:[e.jsx("div",{className:"text-gray-800",children:t===null?e.jsx("p",{className:"select-none text-sm text-gray-500",children:"Add delivery address :"}):e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Delivery address"}),e.jsxs("p",{className:"text-sm",children:["Country:"," ",e.jsx("span",{className:"font-medium",children:t.country})]}),e.jsxs("p",{className:"text-sm",children:["City:"," ",e.jsx("span",{className:"font-medium",children:t.city})]}),e.jsxs("p",{className:"text-sm",children:["Street & number:"," ",e.jsx("span",{className:"font-medium",children:t.street_number})]}),e.jsxs("p",{className:"text-sm",children:["Zip code:"," ",e.jsx("span",{className:"font-medium",children:t.zip_code})]}),e.jsxs("p",{className:"text-sm",children:["Voivodeship:"," ",e.jsx("span",{className:"font-medium",children:t.voivodeship})]})]})}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-[var(--color-secondary)]",onClick:()=>i(!0),children:[e.jsx(E,{size:16,className:"text-gray-600"}),e.jsx("span",{className:"font-bold tracking-wide text-sm",children:"Edit"})]})]})}),d&&e.jsx($,{initialValues:{country:"",city:"",street_number:"",voivodeship:"",zip_code:""},validationSchema:f,onSubmit:s=>{j(s),i(!1)},children:({handleChange:s,handleBlur:n,values:m,errors:x,touched:w,resetForm:k})=>e.jsxs(q,{className:"pb-3",children:[v.map(a=>e.jsxs("div",{className:"mb-2",children:[e.jsx(z,{className:"mb-1 rounded-md text-sm border-2 border-[var(--color-primary-light)] max-w-[200px]",type:"text",name:a,placeholder:`Type ${a}`,onChange:s,onBlur:n,value:m[a],onKeyDown:C=>g(C,k)}),x[a]&&w[a]&&e.jsx("div",{className:"text-red-500 text-xs",children:x[a]})]},a)),e.jsx("button",{className:"ml-3 p-1 rounded-md border-1 bg-[var(--color-secondary)] select-none active:text-[var(--color-primary-light)]",type:"submit",onClick:()=>N(m),children:"Save Address ✅"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"ml-3 p-1 rounded-md border-1 bg-[var(--color-secondary)] select-none  active:border-red-600",children:"❌"})]})}),!!r.length&&e.jsx("div",{children:r.map(s=>e.jsxs("div",{className:"flex m-auto max-w-[500px] justify-between mb-3",children:[e.jsxs("div",{onClick:()=>{b("/details",{state:s})},className:"relative h-fit",children:[e.jsx("img",{className:"relative w-[85px] h-[85px]",src:s.pictureUrl,alt:"product image"}),e.jsx("div",{onClick:()=>u(s._id),className:"absolute w-5.5 h-5.5 rounded-full bottom-2 left-1 bg-white flex justify-center items-center",children:e.jsx(R,{size:13,color:"red"})})]}),e.jsxs("div",{className:"w-[70%] min-w-[200px] flex flex-col gap-2 p-3 rounded-lg border border-[var(--color-secondary)] shadow-md text-sm font-light bg-[var(--bgColor)]",children:[e.jsxs("span",{className:"flex justify-between items-center border-b border-[var(--color-secondary)] pb-1",children:[e.jsx("p",{className:"text-[var(--color-secondary)] font-semibold",children:"Title:"}),e.jsx("p",{className:"text-[var(--color-primary-light)]",children:s.title})]}),e.jsxs("span",{className:"flex justify-between items-center border-b border-[var(--color-secondary)] pb-1",children:[e.jsx("p",{className:"text-[var(--color-secondary)] font-semibold",children:"Description:"}),e.jsx("p",{className:"text-[var(--color-primary-light)]",children:s.description})]}),e.jsxs("span",{className:"flex justify-between items-center border-b border-[var(--color-secondary)] pb-1",children:[e.jsx("p",{className:"text-[var(--color-secondary)] font-semibold",children:"avg Rate:"}),e.jsx("p",{className:"text-[var(--color-primary-light)]",children:s.averageRate.toFixed(2)??"N/A"})]}),e.jsxs("span",{className:"flex justify-between items-center mt-2",children:[e.jsx("p",{className:"text-lg font-bold text-[var(--color-primary)]",children:`$${(s.price*s.amount).toFixed(2)??"N/A"}`}),e.jsxs("span",{className:"flex justify-between items-center gap-2 min-w-[35%] max-w-[40%]",children:[e.jsx(B,{product:s,add:y}),e.jsx("p",{className:"rounded-lg text-[var(--color-secondary)] font-semibold w-6 text-center bg-[var(--color-primary-light)] shadow-sm",children:`${s.amount}`}),e.jsx(V,{product:s,subtract:p})]})]})]})]},s._id))}),r.length!==0?e.jsx("p",{className:"m-auto rounded-2xl text-[var(--color-secondary)] font-semibold p-2 text-center bg-[var(--color-primary-light)] shadow-sm",children:`Total sum $${l.toFixed(2)}`}):e.jsx("p",{children:"Cart is empty"})]})};export{O as default};
