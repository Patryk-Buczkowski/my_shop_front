import{r as d,u as m,j as a}from"./index-C-wEk9U9.js";import{c,a as o,u,F as p}from"./index.esm-DElg_MoY.js";import{a as b}from"./axiosConfig-uxQMNZWX.js";import{B as g}from"./Button-O4Job-3m.js";import"./hoist-non-react-statics.cjs-C-Qo8PK8.js";import"./createSimplePaletteValueFilter-rwAWNNgk.js";const h=c({email:o().email("Invalid email format").required("Email is required"),password:o().required("Password is required")}),x="https://my-shop-backend-h9rp.onrender.com/my_shop_api",N=()=>{const[l,i]=d.useState(),n=m(),e=u({initialValues:{email:"",password:""},validationSchema:h,onSubmit:async r=>{i("pending");try{const t=await b.post(`${x}/login`,{email:r.email,password:r.password});console.log("login",t.data),console.table(r),i("success"),e.resetForm(),setTimeout(()=>{n("/all_categories")},1500)}catch(t){i("error"),console.error(t)}}}),s=!e.dirty||!e.isValid||e.isSubmitting;return a.jsx(p,{value:e,children:a.jsx("div",{className:"container",children:a.jsxs("form",{className:"max-w-80",onSubmit:e.handleSubmit,children:[a.jsx("h2",{children:"Log in"}),l==="success"&&a.jsx("p",{className:"text-green-300",children:"You have successfully logged in!"}),l==="error"&&a.jsx("p",{className:"text-red-300",children:"Something went wrong. Please try again."}),a.jsxs("div",{className:"container max-w-65 flex flex-col",children:[a.jsxs("label",{className:"mb-2 flex justify-between",children:["Email:",a.jsx("input",{className:"border-1 border-amber-400 rounded-lg ml-1",type:"email",name:"email",autoComplete:"email",value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.isSubmitting,"aria-disabled":e.isSubmitting})]}),a.jsxs("label",{className:"mb-2 flex justify-between",children:["Password:",a.jsx("input",{className:"border-1 border-amber-400 rounded-lg ml-1",type:"password",name:"password",autoComplete:"current-password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.isSubmitting,"aria-disabled":e.isSubmitting})]})]}),a.jsx(g,{type:"submit",sx:{borderRadius:"100%",width:"100%"},variant:"contained",size:"large",disabled:s,"aria-disabled":s,tabIndex:s?-1:0,title:s?"Fill out all required fields first.":void 0,children:"Log in"})]})})})};export{N as default};
