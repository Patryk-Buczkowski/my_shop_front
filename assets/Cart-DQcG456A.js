import{c,j as e,a as _,r as h}from"./index-CSeT-8Jk.js";import{c as C,a,b as S,d as A,e as $}from"./index.esm-C3VdtCFs.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M5 12h14",key:"1ays0h"}]],z=c("Minus",q);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],M=c("Pencil",F);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],E=c("Plus",I);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],P=c("Trash2",T),D=({product:r,subtract:i})=>e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>i(r._id),className:"w-5 h-5 flex justify-items-center justify-center align-baseline rounded-full border-2 border-[var(--color-primary)]",children:e.jsx(z,{color:"var(--color-primary)",size:15})})}),R=({product:r,add:i})=>e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>i(r),className:"w-5 h-5 flex justify-items-center justify-center align-baseline rounded-full border-2 border-[var(--color-primary)]",children:e.jsx(E,{color:"var(--color-primary)",size:15})})}),J=()=>{const{cart:r,totalSum:i,addToCart:u,decreaseAmount:y,removeFromCart:p}=_(),[l,j]=h.useState(localStorage.getItem("deliveryAddress")?JSON.parse(localStorage.getItem("deliveryAddress")||"{}"):null),[o,n]=h.useState(!1),v=["city","country","street_number","voivodeship","zip_code"];console.log("cart",r);const b=C({country:a().required("Country is required"),city:a().required("City is required"),street_number:a().required("Street number is required"),voivodeship:a().required("Region is required"),zip_code:a().required("Zip code is required")}),f=(s,d)=>{s.key==="Escape"&&(d(),n(!1))},g=s=>{console.log(s),localStorage.setItem("deliveryAddress",JSON.stringify(s))};return e.jsxs("div",{className:"flex flex-col w-full p-1 gap-0.5",children:[e.jsx("h3",{className:"font-bold select-none tracking-wider",children:"Cart"}),!o&&e.jsxs("div",{className:"flex justify-between max-w-[300px] pb-3 items-end",children:[e.jsx("span",{children:l===null?e.jsx("p",{className:"select-none",children:"Add delivery address :"}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Delivery address"}),e.jsxs("p",{children:["Country: ",l.country]}),e.jsxs("p",{children:["City: ",l.city]}),e.jsxs("p",{children:["Street & number: ",l.street_number]}),e.jsxs("p",{children:["Zip code: ",l.zip_code]})]})}),e.jsxs("div",{className:"flex items-center gap-2",onClick:()=>n(!0),children:[e.jsx(M,{size:14}),e.jsx("span",{className:"font-extrabold tracking-wider text-lg text-[var(--color-secondary)]",children:"Edit"})]})]}),o&&e.jsx(S,{initialValues:{country:"",city:"",street_number:"",voivodeship:"",zip_code:""},validationSchema:b,onSubmit:s=>{j(s),n(!1)},children:({handleChange:s,handleBlur:d,values:m,errors:x,touched:N,resetForm:k})=>e.jsxs(A,{className:"pb-3",children:[v.map(t=>e.jsxs("div",{className:"mb-2",children:[e.jsx($,{className:"mb-1 rounded-md text-sm border-2 border-[var(--color-primary-light)] max-w-[200px]",type:"text",name:t,placeholder:`Type ${t}`,onChange:s,onBlur:d,value:m[t],onKeyDown:w=>f(w,k)}),x[t]&&N[t]&&e.jsx("div",{className:"text-red-500 text-xs",children:x[t]})]},t)),e.jsx("button",{className:"ml-3 p-1 rounded-md border-1 bg-[var(--color-secondary)] select-none active:text-[var(--color-primary-light)]",type:"submit",onClick:()=>g(m),children:"Save Address ✅"}),e.jsx("button",{type:"button",onClick:()=>n(!1),className:"ml-3 p-1 rounded-md border-1 bg-[var(--color-secondary)] select-none  active:border-red-600",children:"❌"})]})}),!!r.length&&e.jsx("div",{children:r.map(s=>e.jsxs("div",{className:"flex justify-between mb-1.5",children:[e.jsxs("div",{className:"relative h-fit",children:[e.jsx("img",{className:"relative w-[85px] h-[85px]",src:s.pictureUrl,alt:"product image"}),e.jsx("div",{onClick:()=>p(s._id),className:"absolute w-5.5 h-5.5 rounded-full bottom-2 left-1 bg-white flex justify-center items-center",children:e.jsx(P,{size:13,color:"red"})})]}),e.jsxs("div",{className:"max-w-[210px] flex pl-2 flex-col gap-1 text-sm font-light",children:[e.jsxs("p",{children:["Title: ",s.title]}),e.jsxs("p",{children:["Description: ",s.description]}),e.jsxs("p",{children:[" avg Rate: ",s.averageRate.toFixed(2)??"N/A"]}),e.jsxs("span",{className:"flex justify-between",children:[e.jsx("p",{className:"font-bold",children:`$${(s.price*s.amount).toFixed(2)??"N/A"}`}),e.jsxs("span",{className:"flex justify-between min-w-[35%] max-w-[40%]",children:[e.jsx(R,{product:s,add:u}),e.jsx("p",{className:"rounded-lg text-[var(--color-secondary)] font-semibold w-5 text-center items-center bg-[var(--color-primary-light)]",children:`${s.amount}`}),e.jsx(D,{product:s,subtract:y})]})]})]})]},s._id))}),r.length!==0?e.jsx("p",{children:`Total sum $${i.toFixed(2)}`}):e.jsx("p",{children:"Cart is empty"})]})};export{J as default};
